/*!
 * Tarmac Festival - Festival Allstedt v1.1.0 (https://tarmac-festival.de/)
 * Copyright 2019-2020 Martin Suckau
 */

$(function(){var i=$("#contactForm button#send"),l=$("#contactForm #sendSpinner"),d=$("#contactForm .form-help-section"),e=$("#contactForm input#subjectRadio1"),t=$("#contactForm input#subjectRadio2"),u=$("#contactForm input#arrival"),m=$("#contactForm input#period"),h=$("#contactForm input#purposeCheck1"),f=$("#contactForm input#purposeCheck2"),v=$("#contactForm input#ageCheck"),p=$("#alertSuccess"),b=$("#alertFail");e.change(function(){"on"===this.value&&$("#contactForm .form-help-section").fadeOut("fast",function(){d.addClass("d-none"),u.removeAttr("required"),m.removeAttr("required"),v.removeAttr("required")})}),t.change(function(){"on"===this.value&&$("#contactForm .form-help-section").fadeIn("fast",function(){d.removeClass("d-none"),u.attr("required",!0),m.attr("required",!0),v.attr("required",!0)})}),$("#contactForm").on("submit",function(e){e.preventDefault(),l.removeClass("d-none"),i.attr("disabled",!0),p.removeClass("show").addClass("d-none"),b.removeClass("show").addClass("d-none");var t=$("input#g-recaptcha-response").val();if(null!=t&&""!==t){var a,n,r;d.hasClass("d-none")?(a="kontakt@tarmac-festival.de",n="Allgemeine Anfrage",r=""):(a="helfen@tarmac-festival.de",n="Ich möchte helfen",r="<br>Anreisedatum: "+u.val()+"<br>Dauer: "+m.val()+"<br>Helfen beim Aufbau: "+h.is(":checked")+"<br>Helfen beim Abbau: "+f.is(":checked")+"<br>Ich bin über 18: "+v.is(":checked"));var o=$("#contactForm input#name").val(),s="Nachricht von: "+o+" ["+$("#contactForm input#email").val()+"]<br>Betreff: "+n+r+"<br><br>"+$("textarea#message").val(),c=$.ajax({type:"POST",url:"/checkRecaptcha",data:{token:t,subject:n,name:o,email:a,message:s}});return c.done(function(e,t,a){console.log("response: "+e,t),l.addClass("d-none"),i.attr("disabled",!1),"success"===e.result?(p.addClass("show").removeClass("d-none"),p.delay(4e3).slideUp(200,function(){$(this).alert("close").addClass("d-none")}),$("#contactForm").get(0).reset()):b.addClass("show").removeClass("d-none")}),c.fail(function(e,t,a){console.error("Error while sending mail: "+t,a),b.addClass("show").removeClass("d-none"),l.addClass("d-none"),i.attr("disabled",!1)}),!1}alert("Unerwarteter Fehler beim Senden deiner Nachricht")}),$('a[data-toggle="tab"]').click(function(e){e.preventDefault(),$(this).tab("show")})});