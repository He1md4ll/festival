/*!
 * Tarmac Festival - Festival Allstedt v1.2.0 (https://tarmac-festival.de/)
 * Copyright 2019-2020 Martin Suckau
 */

$(function(){var e=$("#contactForm input#subject"),c=$("#contactForm input#name"),o=$("#contactForm input#email"),l=$("#contactForm textarea#message"),i=$("#contactForm button#send"),d=$("#contactForm #sendSpinner"),f=$("#alertSuccess"),u=$("#alertFail");$("#contactForm").on("submit",function(t){if(t.preventDefault(),d.removeClass("d-none"),i.attr("disabled",!0),f.first().slideUp("fast"),u.first().slideUp("fast"),!l.val())return alert("Bitte f√ºllen Sie alle Felder aus."),d.addClass("d-none"),void i.attr("disabled",!1);var a=e.val(),n=c.val(),s=o.val(),r="Nachricht von: "+n+" ["+s+"]<br>Betreff: "+a+"<br><br>Nachricht:<br>"+l.val();grecaptcha.execute("6LcuY9QUAAAAACswQfBwCN5I8Q0x6fmFXEKGhV5d",{action:"validate_captcha"}).then(function(t){console.log("recaptcha token: "+t);var e=$.ajax({type:"POST",url:"/checkRecaptcha",data:{token:t,subject:"Anfrage Website: "+a,userMail:s,userName:n,email:"contact@tarmac-festival.de",message:r}});e.done(function(t,e){console.log("response: "+t,e),d.addClass("d-none"),i.attr("disabled",!1),"success"===t.result?(f.first().slideDown("fast").delay(5e3).slideUp("fast"),$("#contactForm").get(0).reset(),l.summernote("reset")):u.first().slideDown("fast")}),e.fail(function(t,e,a){console.error("Error while sending mail: "+e,a),u.first().slideDown("fast"),d.addClass("d-none"),i.attr("disabled",!1)})});return!1}),$('a[data-toggle="tab"]').click(function(t){t.preventDefault(),$(this).tab("show")})});